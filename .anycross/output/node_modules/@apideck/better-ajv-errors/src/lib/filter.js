"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.filterSingleErrorPerProperty = void 0;
var _constants = require("../constants");
const filterSingleErrorPerProperty = errors => {
  const errorsPerProperty = errors.reduce((acc, error) => {
    const prop = error.instancePath + (error.params?.additionalProperty ?? error.params?.missingProperty ?? '');
    const existingError = acc[prop];
    if (!existingError) {
      acc[prop] = error;
      return acc;
    }
    const weight = _constants.AJV_ERROR_KEYWORD_WEIGHT_MAP[error.keyword] ?? 0;
    const existingWeight = _constants.AJV_ERROR_KEYWORD_WEIGHT_MAP[existingError.keyword] ?? 0;
    if (weight > existingWeight) {
      acc[prop] = error;
    }
    return acc;
  }, {});
  return Object.values(errorsPerProperty);
};
exports.filterSingleErrorPerProperty = filterSingleErrorPerProperty;
//# sourceMappingURL=filter.js.map